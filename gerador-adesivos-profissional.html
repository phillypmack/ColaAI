<!DOCTYPE html>
<html class="dark" lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HardSkills - Gerador de Adesivos DTF UV</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#4b2bee",
                        "background-light": "#f6f6f8",
                        "background-dark": "#131022",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
    <div class="relative flex min-h-screen w-full flex-col overflow-x-hidden">
        <main class="layout-container flex h-full grow flex-col">
            <div class="px-4 sm:px-10 md:px-20 lg:px-40 flex flex-1 justify-center py-5">
                <div class="layout-content-container flex flex-col w-full max-w-[1400px] flex-1">

                    <!-- Hero Section -->
                    <div class="@container">
                        <div class="@[480px]:p-4">
                            <div class="flex min-h-[400px] flex-col gap-6 bg-cover bg-center bg-no-repeat @[480px]:gap-8 items-center justify-center p-4 rounded-xl" style="background-image: linear-gradient(rgba(19, 16, 34, 0.6) 0%, rgba(19, 16, 34, 0.9) 100%), url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=1200&auto=format&fit=crop');">
                                <div class="flex flex-col gap-2 text-center">
                                    <h1 class="text-white text-4xl font-bold leading-tight tracking-[-0.033em] @[480px]:text-5xl @[480px]:font-bold @[480px]:leading-tight @[480px]:tracking-[-0.033em]">
                                        HardSkills
                                    </h1>
                                    <h2 class="text-gray-300 text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal">
                                        Seus √≠cones de tech prontos para impress√£o DTF UV com alto relevo 3D.
                                    </h2>
                                </div>

                                <!-- Search Box -->
                                <label class="flex flex-col min-w-40 h-14 w-full max-w-[480px] @[480px]:h-16">
                                    <div class="flex w-full flex-1 items-stretch rounded-lg h-full shadow-lg">
                                        <div class="text-gray-400 flex border border-gray-700 bg-[#1e1933] items-center justify-center pl-4 rounded-l-lg border-r-0">
                                            <span class="material-symbols-outlined">search</span>
                                        </div>
                                        <input id="searchInput" onkeyup="filterLanguages()" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden text-white focus:outline-0 focus:ring-0 border border-gray-700 bg-[#1e1933] focus:border-primary h-full placeholder:text-gray-400 px-4 pr-2 border-l-0 rounded-r-lg text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal" placeholder="Buscar por nome..." value="" />
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Info Box -->
                    <div class="mt-6 p-6 bg-[#1e1933] border border-gray-700 rounded-xl">
                        <h3 class="text-primary text-lg font-bold mb-3">Como Funciona - Impress√£o DTF UV Alto Relevo 3D</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-300">
                            <div class="flex gap-2">
                                <span class="text-primary">1Ô∏è‚É£</span>
                                <div><strong class="text-white">Selecione:</strong> Clique nos √≠cones ou use "Selecionar" para categorias</div>
                            </div>
                            <div class="flex gap-2">
                                <span class="text-primary">2Ô∏è‚É£</span>
                                <div><strong class="text-white">Configure:</strong> Escolha tamanho, espa√ßamento e formato</div>
                            </div>
                            <div class="flex gap-2">
                                <span class="text-primary">3Ô∏è‚É£</span>
                                <div><strong class="text-white">Gere:</strong> Baixe 3 arquivos SVG por folha (CORES + BRANCO + VERNIZ)</div>
                            </div>
                            <div class="flex gap-2">
                                <span class="text-primary">üé®</span>
                                <div><strong class="text-white">CORES:</strong> √çcones CMYK coloridos</div>
                            </div>
                            <div class="flex gap-2">
                                <span class="text-primary">‚ö™</span>
                                <div><strong class="text-white">BRANCO:</strong> Silhuetas brancas (camada base opaca)</div>
                            </div>
                            <div class="flex gap-2">
                                <span class="text-primary">‚ú®</span>
                                <div><strong class="text-white">VERNIZ:</strong> √Åreas de relevo UV 3D</div>
                            </div>
                        </div>
                    </div>

                    <!-- Configuration -->
                    <div class="mt-6 p-6 bg-[#1e1933] border border-gray-700 rounded-xl">
                        <h3 class="text-white text-lg font-bold mb-4">Configura√ß√µes</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="text-gray-400 text-sm mb-2 block">Tamanho do Adesivo</label>
                                <select id="stickerSize" onchange="updateStats()" class="w-full bg-[#2a2440] border border-gray-700 text-white rounded-lg px-4 py-2 focus:border-primary focus:outline-none">
                                    <option value="10">10mm (Pequeno)</option>
                                    <option value="25">25mm (M√©dio)</option>
                                    <option value="30" selected>30mm (Grande)</option>
                                    <option value="35">35mm (Muito Grande)</option>
                                    <option value="40">40mm (Extra Grande)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-gray-400 text-sm mb-2 block">Espa√ßamento</label>
                                <select id="spacing" onchange="updateStats()" class="w-full bg-[#2a2440] border border-gray-700 text-white rounded-lg px-4 py-2 focus:border-primary focus:outline-none">
                                    <option value="5">5mm</option>
                                    <option value="10" selected>10mm</option>
                                    <option value="15">15mm</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-gray-400 text-sm mb-2 block">Forma</label>
                                <select id="stickerShape" onchange="updatePreview()" class="w-full bg-[#2a2440] border border-gray-700 text-white rounded-lg px-4 py-2 focus:border-primary focus:outline-none">
                                    <option value="circle" selected>C√≠rculo</option>
                                    <option value="square">Quadrado</option>
                                    <option value="rounded">Arredondado</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Bar -->
                    <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="p-4 bg-[#1e1933] border border-gray-700 rounded-xl text-center">
                            <div class="text-gray-400 text-xs mb-1">√çcones √önicos</div>
                            <div id="selectedIcons" class="text-primary text-3xl font-bold">0</div>
                        </div>
                        <div class="p-4 bg-[#1e1933] border border-gray-700 rounded-xl text-center">
                            <div class="text-gray-400 text-xs mb-1">Total de Adesivos</div>
                            <div id="totalStickers" class="text-primary text-3xl font-bold">0</div>
                        </div>
                        <div class="p-4 bg-[#1e1933] border border-gray-700 rounded-xl text-center">
                            <div class="text-gray-400 text-xs mb-1">Cabem no A4</div>
                            <div id="maxFit" class="text-primary text-3xl font-bold">48</div>
                        </div>
                        <div class="p-4 bg-[#1e1933] border border-gray-700 rounded-xl text-center">
                            <div class="text-gray-400 text-xs mb-1">Folhas Necess√°rias</div>
                            <div id="sheetsNeeded" class="text-primary text-3xl font-bold">0</div>
                        </div>
                    </div>

                    <!-- Preview -->
                    <div class="mt-6 p-6 bg-[#1e1933] border border-gray-700 rounded-xl">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-white text-lg font-bold">Pr√©-visualiza√ß√£o (Camada Cores)</h3>
                            <button onclick="updatePreview()" class="px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm font-medium transition-colors">
                                Atualizar Preview
                            </button>
                        </div>
                        <div id="previewContainer" class="w-full max-w-md mx-auto bg-white rounded-lg p-4 aspect-[210/297] flex items-center justify-center">
                            <div class="text-gray-400 text-center italic">
                                Selecione √≠cones para ver a pr√©-visualiza√ß√£o aqui.
                            </div>
                        </div>
                    </div>

                    <!-- Categories and Icons -->
                    <div id="languagesContainer" class="mt-6"></div>

                    <!-- Action Panel (Sticky Bottom) -->
                    <div class="p-4 @container sticky bottom-4 mt-6">
                        <div class="flex flex-1 flex-col items-start justify-between gap-4 rounded-lg border border-gray-700 bg-background-dark/90 backdrop-blur-sm p-5 @[480px]:flex-row @[480px]:items-center shadow-2xl">
                            <div class="flex flex-col gap-1">
                                <p class="text-white text-base font-bold leading-tight">
                                    <span id="selectedCount">0</span> √≠cones selecionados
                                </p>
                                <p class="text-gray-400 text-sm font-normal leading-normal">Pronto para gerar seus arquivos de impress√£o DTF UV?</p>
                            </div>
                            <div class="flex gap-3">
                                <button onclick="clearSelection()" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-gray-700 hover:bg-gray-600 text-white text-sm font-bold leading-normal transition-colors">
                                    <span class="truncate">Limpar</span>
                                </button>
                                <button id="generateBtn" onclick="generateFiles()" disabled class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-primary text-white text-sm font-bold leading-normal hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    <span class="truncate">Gerar Arquivos</span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="hidden fixed inset-0 bg-black/80 z-50 items-center justify-center">
        <div class="bg-[#1e1933] border border-gray-700 rounded-xl p-8 text-center max-w-md">
            <div class="w-16 h-16 border-4 border-gray-700 border-t-primary rounded-full animate-spin mx-auto mb-4"></div>
            <h3 id="loadingText" class="text-white text-lg font-bold mb-2">Baixando √≠cones...</h3>
            <p id="loadingProgress" class="text-gray-400 text-sm"></p>
        </div>
    </div>

    <script>
        const languagesData = {
            "üî• Top 20": [
                { name: "Python", devicon: "python", color: "#3776ab" },
                { name: "JavaScript", devicon: "javascript", color: "#f7df1e" },
                { name: "Java", devicon: "java", color: "#007396" },
                { name: "TypeScript", devicon: "typescript", color: "#3178c6" },
                { name: "C++", devicon: "cplusplus", color: "#00599c" },
                { name: "C#", devicon: "csharp", color: "#239120" },
                { name: "PHP", devicon: "php", color: "#777bb4" },
                { name: "C", devicon: "c", color: "#a8b9cc" },
                { name: "Ruby", devicon: "ruby", color: "#cc342d" },
                { name: "Go", devicon: "go", color: "#00add8" },
                { name: "Swift", devicon: "swift", color: "#fa7343" },
                { name: "Kotlin", devicon: "kotlin", color: "#7f52ff" },
                { name: "Rust", devicon: "rust", color: "#ce422b" },
                { name: "Scala", devicon: "scala", color: "#dc322f" },
                { name: "R", devicon: "r", color: "#276dc3" },
                { name: "Dart", devicon: "dart", color: "#0175c2" },
                { name: "Perl", devicon: "perl", color: "#39457e" },
                { name: "Lua", devicon: "lua", color: "#000080" },
                { name: "Groovy", devicon: "groovy", color: "#4298b8" },
                { name: "Julia", devicon: "julia", color: "#9558b2" }
            ],
            "üåê Web": [
                { name: "HTML5", devicon: "html5", color: "#e34f26" },
                { name: "CSS3", devicon: "css3", color: "#1572b6" },
                { name: "Sass", devicon: "sass", color: "#cc6699" },
                { name: "Less", devicon: "less", color: "#1d365d" },
                { name: "Bootstrap", devicon: "bootstrap", color: "#7952b3" },
                { name: "Tailwind CSS", devicon: "tailwindcss", color: "#06b6d4" },
                { name: "React", devicon: "react", color: "#61dafb" },
                { name: "Vue.js", devicon: "vuejs", color: "#4fc08d" },
                { name: "Angular", devicon: "angularjs", color: "#dd0031" },
                { name: "Svelte", devicon: "svelte", color: "#ff3e00" },
                { name: "jQuery", devicon: "jquery", color: "#0769ad" },
                { name: "Webpack", devicon: "webpack", color: "#8dd6f9" },
                { name: "Babel", devicon: "babel", color: "#f9dc3e" },
                { name: "Vite", devicon: "vitejs", color: "#646cff" },
                { name: "Gatsby", devicon: "gatsby", color: "#663399" }
            ],
            "‚öôÔ∏è Backend e Frameworks": [
                { name: "Node.js", devicon: "nodejs", color: "#339933" },
                { name: "Express", devicon: "express", color: "#000000" },
                { name: "Next.js", devicon: "nextjs", color: "#000000" },
                { name: "Nuxt.js", devicon: "nuxtjs", color: "#00c58e" },
                { name: "NestJS", devicon: "nestjs", color: "#e0234e" },
                { name: "Django", devicon: "django", color: "#092e20" },
                { name: "Flask", devicon: "flask", color: "#000000" },
                { name: "Spring", devicon: "spring", color: "#6db33f" },
                { name: ".NET", devicon: "dot-net", color: "#512bd4" },
                { name: "Laravel", devicon: "laravel", color: "#ff2d20" },
                { name: "Symfony", devicon: "symfony", color: "#000000" },
                { name: "Rails", devicon: "rails", color: "#cc0000" },
                { name: "Phoenix", devicon: "phoenix", color: "#fd4f00" },
                { name: "GraphQL", devicon: "graphql", color: "#e10098" },
                { name: "Apollo", devicon: "apollographql", color: "#311c87" }
            ],
            "üíæ Databases": [
                { name: "MySQL", devicon: "mysql", color: "#4479a1" },
                { name: "PostgreSQL", devicon: "postgresql", color: "#336791" },
                { name: "SQLite", devicon: "sqlite", color: "#003b57" },
                { name: "Microsoft SQL", devicon: "microsoftsqlserver", color: "#cc2927" },
                { name: "Oracle", devicon: "oracle", color: "#f80000" },
                { name: "MongoDB", devicon: "mongodb", color: "#47a248" },
                { name: "Redis", devicon: "redis", color: "#dc382d" },
                { name: "Firebase", devicon: "firebase", color: "#ffca28" },
                { name: "Supabase", devicon: "supabase", color: "#3ecf8e" },
                { name: "Cassandra", devicon: "cassandra", color: "#1287b1" },
                { name: "CouchDB", devicon: "couchdb", color: "#e42528" },
                { name: "Neo4j", devicon: "neo4j", color: "#008cc1" }
            ],
            "‚òÅÔ∏è Cloud, DevOps e Infra": [
                { name: "Docker", devicon: "docker", color: "#2496ed" },
                { name: "Kubernetes", devicon: "kubernetes", color: "#326ce5" },
                { name: "AWS", devicon: "amazonwebservices", color: "#232f3e" },
                { name: "Google Cloud", devicon: "googlecloud", color: "#4285f4" },
                { name: "Azure", devicon: "azure", color: "#0089d6" },
                { name: "Heroku", devicon: "heroku", color: "#430098" },
                { name: "Vercel", devicon: "vercel", color: "#000000" },
                { name: "Netlify", devicon: "netlify", color: "#00c7b7" },
                { name: "DigitalOcean", devicon: "digitalocean", color: "#0080ff" },
                { name: "Terraform", devicon: "terraform", color: "#7b42bc" },
                { name: "Ansible", devicon: "ansible", color: "#ee0000" },
                { name: "Jenkins", devicon: "jenkins", color: "#d24939" },
                { name: "Git", devicon: "git", color: "#f05032" },
                { name: "GitHub", devicon: "github", color: "#181717" },
                { name: "GitLab", devicon: "gitlab", color: "#fca121" },
                { name: "Bitbucket", devicon: "bitbucket", color: "#0052cc" },
                { name: "Nginx", devicon: "nginx", color: "#009639" },
                { name: "Apache", devicon: "apache", color: "#d22128" },
                { name: "Grafana", devicon: "grafana", color: "#f46800" },
                { name: "Prometheus", devicon: "prometheus", color: "#e6522c" }
            ],
            "üêß Distribui√ß√µes Linux": [
                { name: "Linux", devicon: "linux", color: "#fcc624" },
                { name: "Ubuntu", devicon: "ubuntu", color: "#e95420" },
                { name: "Debian", devicon: "debian", color: "#a80030" },
                { name: "Fedora", devicon: "fedora", color: "#51a2da" },
                { name: "Arch Linux", devicon: "archlinux", color: "#1793d1" },
                { name: "CentOS", devicon: "centos", color: "#212429" },
                { name: "elementary OS", devicon: "elementary", color: "#64baff" },
                { name: "Gentoo", devicon: "gentoo", color: "#54487a" },
                { name: "Kali Linux", devicon: "kalilinux", color: "#557c94" },
                { name: "Manjaro", devicon: "manjaro", color: "#35bf5c" },
                { name: "Linux Mint", devicon: "linuxmint", color: "#87cf3e" },
                { name: "NixOS", devicon: "nixos", color: "#7ed5ea" },
                { name: "openSUSE", devicon: "opensuse", color: "#73ba25" },
                { name: "Raspberry Pi", devicon: "raspberrypi", color: "#c51a4a" },
                { name: "Red Hat", devicon: "redhat", color: "#ee0000" },
                { name: "Rocky Linux", devicon: "rockylinux", color: "#10b981" },
                { name: "SUSE", devicon: "suse", color: "#0c322c" }
            ],
            "üõ†Ô∏è Ferramentas e Ecossistema": [
                { name: "VS Code", devicon: "vscode", color: "#007acc" },
                { name: "Vim", devicon: "vim", color: "#019733" },
                { name: "Neovim", devicon: "neovim", color: "#57a143" },
                { name: "JetBrains", devicon: "jetbrains", color: "#000000" },
                { name: "WebStorm", devicon: "webstorm", color: "#000000" },
                { name: "IntelliJ IDEA", devicon: "intellij", color: "#000000" },
                { name: "PyCharm", devicon: "pycharm", color: "#000000" },
                { name: "NPM", devicon: "npm", color: "#cb3837" },
                { name: "Yarn", devicon: "yarn", color: "#2c8ebb" },
                { name: "pnpm", devicon: "pnpm", color: "#f69220" },
                { name: "ESLint", devicon: "eslint", color: "#4b32c3" },
                { name: "Prettier", devicon: "prettier", color: "#f7b93e" },
                { name: "Jest", devicon: "jest", color: "#c21325" },
                { name: "Cypress", devicon: "cypress", color: "#17202c" },
                { name: "Storybook", devicon: "storybook", color: "#ff4785" },
                { name: "Figma", devicon: "figma", color: "#f24e1e" },
                { name: "Postman", devicon: "postman", color: "#ff6c37" },
                { name: "Markdown", devicon: "markdown", color: "#000000" },
                { name: "GitKraken", devicon: "gitkraken", color: "#179287" },
                { name: "Jira", devicon: "jira", color: "#0052cc" },
                { name: "Trello", devicon: "trello", color: "#0079bf" },
                { name: "Slack", devicon: "slack", color: "#4a154b" }
            ],
            "üì± Mobile e Desktop": [
                { name: "Android", devicon: "android", color: "#3ddc84" },
                { name: "Flutter", devicon: "flutter", color: "#02569b" },
                { name: "React Native", devicon: "react", color: "#61dafb" },
                { name: "Electron", devicon: "electron", color: "#47848f" },
                { name: "Xamarin", devicon: "xamarin", color: "#3498db" },
                { name: "Apple", devicon: "apple", color: "#000000" },
                { name: "Windows", devicon: "windows8", color: "#00adef" }
            ],
            "üß† Data Science e IA": [
                { name: "TensorFlow", devicon: "tensorflow", color: "#ff6f00" },
                { name: "PyTorch", devicon: "pytorch", color: "#ee4c2c" },
                { name: "Pandas", devicon: "pandas", color: "#150458" },
                { name: "NumPy", devicon: "numpy", color: "#013243" },
                { name: "SciPy", devicon: "scipy", color: "#8b53a8" },
                { name: "Jupyter", devicon: "jupyter", color: "#f37626" },
                { name: "Scikit-learn", devicon: "scikit-learn", color: "#f7931e" },
                { name: "Keras", devicon: "keras", color: "#d00000" },
                { name: "Hugging Face", devicon: "huggingface", color: "#ffde31" },
                { name: "OpenAI", devicon: "chatgpt", color: "#74aa9c" },
                { name: "ChatGPT", devicon: "chatgpt", color: "#74aa9c" },
                { name: "LangChain", devicon: "langchain", color: "#000000" },
                { name: "Midjourney", devicon: "midjourney", color: "#000000" },
                { name: "Stable Diffusion", devicon: "stablediffusion", color: "#000000" },
                { name: "Mistral AI", devicon: "mistralai", color: "#ff8c00" },
                { name: "Google Gemini", devicon: "google_generative_ai", color: "#8950ff" },
                { name: "Anaconda", devicon: "anaconda", color: "#44a833" },
                { name: "Claude", devicon: "claude", color: "#d97757" }
            ]
        };

        let selectedLanguages = new Map();

        function renderLanguages() {
            const container = document.getElementById('languagesContainer');
            container.innerHTML = '';

            for (const [category, languages] of Object.entries(languagesData)) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-8';

                const categoryHeader = `
                    <div class="flex justify-between items-center mb-4 p-4 bg-[#1e1933] border border-gray-700 rounded-xl">
                        <h3 class="text-white text-lg font-bold">${category}</h3>
                        <div class="flex items-center gap-3">
                            <span class="text-gray-400 text-sm">${languages.length} √≠cones</span>
                            <button onclick="selectCategory('${category}', event)" class="px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm font-medium transition-colors">
                                Selecionar
                            </button>
                        </div>
                    </div>
                `;
                categoryDiv.innerHTML = categoryHeader;

                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-4';

                languages.forEach((lang, index) => {
                    const langId = `${category.replace(/\s/g, '-')}-${index}`;
                    const iconUrl = `https://cdn.jsdelivr.net/gh/devicons/devicon/icons/${lang.devicon}/${lang.devicon}-original.svg`;

                    const card = document.createElement('div');
                    card.className = 'relative group cursor-pointer bg-[#1e1933] border-2 border-gray-700 hover:border-primary flex flex-col gap-3 rounded-lg justify-end p-4 aspect-square transition-all duration-200';
                    card.dataset.name = lang.name.toLowerCase();
                    card.dataset.category = category;
                    card.dataset.langid = langId;
                    card.dataset.langData = JSON.stringify(lang);
                    card.onclick = () => toggleSelection(card, lang);

                    card.innerHTML = `
                        <div class="absolute inset-0 bg-primary opacity-0 group-hover:opacity-10 transition-opacity rounded-lg"></div>
                        <div class="flex-1 flex items-center justify-center">
                            <img src="${iconUrl}" alt="${lang.name}" class="w-20 h-20 object-contain">
                        </div>
                        <p class="text-white text-sm font-bold text-center z-10">${lang.name}</p>
                        <div class="quantity-selector hidden flex-col gap-2 z-10">
                            <label class="text-gray-400 text-xs">Quantidade:</label>
                            <input type="number" id="qty-${langId}" min="1" value="1"
                                onchange="updateIconQuantity('${langId}', this.value)"
                                onclick="event.stopPropagation()"
                                class="w-full bg-[#2a2440] border border-gray-700 text-white rounded px-2 py-1 text-sm">
                        </div>
                    `;

                    grid.appendChild(card);
                });

                categoryDiv.appendChild(grid);
                container.appendChild(categoryDiv);
            }

            for (const [langId, quantity] of selectedLanguages.entries()) {
                const card = document.querySelector(`[data-langid="${langId}"]`);
                if (card) {
                    card.classList.remove('border-gray-700');
                    card.classList.add('border-primary', 'bg-primary/10');
                    const qtySelector = card.querySelector('.quantity-selector');
                    if (qtySelector) qtySelector.classList.remove('hidden');
                    const qtyInput = card.querySelector(`#qty-${langId}`);
                    if (qtyInput) qtyInput.value = quantity;
                }
            }

            updateStats();
            updatePreview();
        }

        function toggleSelection(card, lang) {
            const langId = card.dataset.langid;
            const qtySelector = card.querySelector('.quantity-selector');
            const qtyInput = card.querySelector(`#qty-${langId}`);

            if (selectedLanguages.has(langId)) {
                selectedLanguages.delete(langId);
                card.classList.remove('border-primary', 'bg-primary/10');
                card.classList.add('border-gray-700');
                if (qtySelector) qtySelector.classList.add('hidden');
                if (qtyInput) qtyInput.value = 1;
            } else {
                selectedLanguages.set(langId, 1);
                card.classList.remove('border-gray-700');
                card.classList.add('border-primary', 'bg-primary/10');
                if (qtySelector) qtySelector.classList.remove('hidden');
                if (qtyInput) qtyInput.value = 1;
            }

            updateStats();
            updatePreview();
        }

        function updateIconQuantity(langId, quantity) {
            if (selectedLanguages.has(langId)) {
                const qty = parseInt(quantity);
                if (qty > 0) {
                    selectedLanguages.set(langId, qty);
                } else {
                    document.querySelector(`[data-langid="${langId}"]`).click();
                }
            }
            updateStats();
            updatePreview();
        }

        function selectCategory(category, event) {
            event.stopPropagation();
            const cards = document.querySelectorAll(`[data-category="${category}"]`);
            const allSelected = Array.from(cards).every(card => selectedLanguages.has(card.dataset.langid));

            cards.forEach(card => {
                const langId = card.dataset.langid;
                const qtySelector = card.querySelector('.quantity-selector');
                const qtyInput = card.querySelector(`#qty-${langId}`);

                if (allSelected) {
                    selectedLanguages.delete(langId);
                    card.classList.remove('border-primary', 'bg-primary/10');
                    card.classList.add('border-gray-700');
                    if (qtySelector) qtySelector.classList.add('hidden');
                    if (qtyInput) qtyInput.value = 1;
                } else {
                    selectedLanguages.set(langId, 1);
                    card.classList.remove('border-gray-700');
                    card.classList.add('border-primary', 'bg-primary/10');
                    if (qtySelector) qtySelector.classList.remove('hidden');
                    if (qtyInput) qtyInput.value = 1;
                }
            });

            updateStats();
            updatePreview();
        }

        function clearSelection() {
            selectedLanguages.clear();
            document.querySelectorAll('[data-langid]').forEach(card => {
                card.classList.remove('border-primary', 'bg-primary/10');
                card.classList.add('border-gray-700');
                const qtySelector = card.querySelector('.quantity-selector');
                if (qtySelector) qtySelector.classList.add('hidden');
                const qtyInput = card.querySelector('input[type="number"]');
                if (qtyInput) qtyInput.value = 1;
            });
            updateStats();
            updatePreview();
        }

        function updateStats() {
            const count = selectedLanguages.size;
            let totalStickers = 0;
            selectedLanguages.forEach(quantity => {
                totalStickers += quantity;
            });

            document.getElementById('selectedCount').textContent = count;
            document.getElementById('selectedIcons').textContent = count;
            document.getElementById('totalStickers').textContent = totalStickers;

            const stickerSize = parseInt(document.getElementById('stickerSize').value);
            const spacing = parseInt(document.getElementById('spacing').value);
            const maxFit = calculateMaxFit(stickerSize, spacing);
            document.getElementById('maxFit').textContent = maxFit;

            const sheetsNeeded = Math.ceil(totalStickers / maxFit);
            document.getElementById('sheetsNeeded').textContent = totalStickers > 0 ? sheetsNeeded : 0;

            document.getElementById('generateBtn').disabled = count === 0;
        }

        function calculateMaxFit(stickerSize, spacing) {
            const a4Width = 210;
            const a4Height = 297;
            const margin = 10;

            const cellSize = stickerSize + spacing;
            const cols = Math.floor((a4Width - 2 * margin) / cellSize);
            const rows = Math.floor((a4Height - 2 * margin) / cellSize);

            return cols * rows;
        }

        function filterLanguages() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('[data-langid]').forEach(card => {
                card.style.display = card.dataset.name.includes(searchTerm) ? 'block' : 'none';
            });
        }

        async function updatePreview() {
            const previewContainer = document.getElementById('previewContainer');
            if (selectedLanguages.size === 0) {
                previewContainer.innerHTML = `
                    <div class="text-gray-400 text-center italic">
                        Selecione √≠cones para ver a pr√©-visualiza√ß√£o aqui.
                    </div>`;
                return;
            }

            previewContainer.innerHTML = `
                <div class="text-gray-400 text-center italic">
                    Gerando pr√©-visualiza√ß√£o...
                </div>`;

            try {
                const stickerSize = parseInt(document.getElementById('stickerSize').value);
                const spacing = parseInt(document.getElementById('spacing').value);
                const shape = document.getElementById('stickerShape').value;
                const maxFit = calculateMaxFit(stickerSize, spacing);

                const uniqueSelectedLangIds = Array.from(selectedLanguages.keys());
                const iconsData = await fetchAllIcons(uniqueSelectedLangIds, false);

                const expandedArray = [];
                selectedLanguages.forEach((quantity, langId) => {
                    for (let i = 0; i < quantity; i++) {
                        expandedArray.push(langId);
                    }
                });

                const svgPreview = await generateSheetSVG(0, stickerSize, spacing, shape, maxFit, iconsData, 'cores', expandedArray);
                previewContainer.innerHTML = svgPreview;
            } catch (error) {
                console.error("Erro ao gerar preview:", error);
                previewContainer.innerHTML = `<div class="text-red-400 text-center">Erro ao gerar preview.</div>`;
            }
        }

        async function generateFiles() {
            const overlay = document.getElementById('loadingOverlay');
            overlay.classList.remove('hidden');
            overlay.classList.add('flex');

            try {
                const stickerSize = parseInt(document.getElementById('stickerSize').value);
                const spacing = parseInt(document.getElementById('spacing').value);
                const shape = document.getElementById('stickerShape').value;
                const maxFit = calculateMaxFit(stickerSize, spacing);

                const uniqueSelectedLangIds = Array.from(selectedLanguages.keys());
                const iconsData = await fetchAllIcons(uniqueSelectedLangIds, true);

                const expandedArray = [];
                selectedLanguages.forEach((quantity, langId) => {
                    for (let i = 0; i < quantity; i++) {
                        expandedArray.push(langId);
                    }
                });
                const totalSheets = Math.ceil(expandedArray.length / maxFit);

                document.getElementById('loadingText').textContent = 'Gerando arquivos DTF UV...';

                for (let sheet = 0; sheet < totalSheets; sheet++) {
                    const svgCores = await generateSheetSVG(sheet, stickerSize, spacing, shape, maxFit, iconsData, 'cores', expandedArray);
                    downloadFile(`adesivos-CORES-sheet${sheet + 1}-de-${totalSheets}.svg`, svgCores, 'image/svg+xml');

                    const svgBranco = await generateSheetSVG(sheet, stickerSize, spacing, shape, maxFit, iconsData, 'branco', expandedArray);
                    downloadFile(`adesivos-BRANCO-sheet${sheet + 1}-de-${totalSheets}.svg`, svgBranco, 'image/svg+xml');

                    const svgVerniz = await generateSheetSVG(sheet, stickerSize, spacing, shape, maxFit, iconsData, 'verniz', expandedArray);
                    downloadFile(`adesivos-VERNIZ-sheet${sheet + 1}-de-${totalSheets}.svg`, svgVerniz, 'image/svg+xml');
                }

                const totalFiles = totalSheets * 3;
                const uniqueIcons = selectedLanguages.size;
                const totalStickers = expandedArray.length;

                alert(`‚úÖ ${totalFiles} arquivo(s) SVG gerado(s)!\n\nüìä ${uniqueIcons} √≠cone(s) √∫nico(s) = ${totalStickers} adesivo(s) no total\nüé® CORES: Impress√£o colorida CMYK\n‚ö™ BRANCO: Camada de tinta branca\n‚ú® VERNIZ: Camada UV para relevo 3D\n\nEnvie os 3 arquivos para gr√°fica DTF UV!`);
            } finally {
                overlay.classList.remove('flex');
                overlay.classList.add('hidden');
            }
        }

        async function fetchAllIcons(selectedArray, showLoading = true) {
            const iconsData = {};
            const total = selectedArray.length;

            if (showLoading) {
                document.getElementById('loadingText').textContent = 'Baixando √≠cones...';
            }

            for (let i = 0; i < selectedArray.length; i++) {
                const langId = selectedArray[i];
                const card = document.querySelector(`[data-langid="${langId}"]`);
                if (!card) continue;

                const lang = JSON.parse(card.dataset.langData || '{}');
                if (!lang.devicon) {
                    iconsData[langId] = { lang, svgText: null };
                    continue;
                }

                const iconUrl = `https://cdn.jsdelivr.net/gh/devicons/devicon/icons/${lang.devicon}/${lang.devicon}-original.svg`;

                if (showLoading) {
                    document.getElementById('loadingProgress').textContent = `Baixando ${lang.name} (${i + 1}/${total})...`;
                }

                try {
                    const response = await fetch(iconUrl);
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    const svgText = await response.text();
                    iconsData[langId] = { lang, svgText };
                } catch (error) {
                    console.error(`Erro ao buscar √≠cone ${lang.name}:`, error);
                    iconsData[langId] = { lang, svgText: null };
                }
            }

            if (showLoading) {
                document.getElementById('loadingText').textContent = 'Gerando arquivo SVG...';
                document.getElementById('loadingProgress').textContent = '';
            }

            return iconsData;
        }

        function getSanitizedSvgContent(svgText) {
            if (!svgText) return '';
            try {
                const parser = new DOMParser();
                const svgDoc = parser.parseFromString(svgText, 'image/svg+xml');
                const svgElement = svgDoc.querySelector('svg');
                if (!svgElement) return '';

                svgElement.querySelectorAll('*').forEach(el => {
                    el.removeAttribute('fill');
                    el.removeAttribute('stroke');
                });
                return svgElement.innerHTML;
            } catch (e) { return ''; }
        }

        function generateSheetSVG(sheetIndex, stickerSize, spacing, shape, maxFit, iconsData, layerType = 'cores', expandedArray) {
            const start = sheetIndex * maxFit;
            const end = Math.min(start + maxFit, expandedArray.length);
            const sheetLanguages = expandedArray.slice(start, end);

            const a4Width = 210;
            const a4Height = 297;
            const margin = 10;
            const cellSize = stickerSize + spacing;
            const cols = Math.floor((a4Width - 2 * margin) / cellSize);

            const layerConfig = {
                cores: {
                    title: `Adesivos CORES (CMYK) - Folha ${sheetIndex + 1}`,
                    bgColor: 'white',
                    description: 'Camada de impress√£o colorida - Enviar para impressora CMYK'
                },
                branco: {
                    title: `Adesivos BRANCO (White Layer) - Folha ${sheetIndex + 1}`,
                    bgColor: 'black',
                    description: 'Camada de tinta branca - Define base opaca para cores'
                },
                verniz: {
                    title: `Adesivos VERNIZ (UV Relief) - Folha ${sheetIndex + 1}`,
                    bgColor: 'black',
                    description: 'Camada de verniz UV - Define √°reas com efeito 3D em alto relevo'
                }
            };

            const config = layerConfig[layerType];

            let svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="${a4Width}mm" height="${a4Height}mm" viewBox="0 0 ${a4Width} ${a4Height}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>${config.title}</title>
  <desc>${config.description}</desc>
  <rect width="${a4Width}" height="${a4Height}" fill="${config.bgColor}"/>
`;

            let defs = '\n  <defs>';
            sheetLanguages.forEach((langId) => {
                const iconData = iconsData[langId];
                if (!iconData || !iconData.svgText) return;

                const parser = new DOMParser();
                const svgDoc = parser.parseFromString(iconData.svgText, 'image/svg+xml');
                const svgElement = svgDoc.querySelector('svg');

                if (svgElement) {
                    const viewBox = svgElement.getAttribute('viewBox') || '0 0 128 128';
                    const innerHTML = (layerType === 'cores') ? svgElement.innerHTML : getSanitizedSvgContent(iconData.svgText);
                    const iconId = langId.replace(/[^a-zA-Z0-9]/g, '-');
                    defs += `\n    <symbol id="icon-${iconId}" viewBox="${viewBox}">${innerHTML}</symbol>`;
                }
            });
            defs += '\n  </defs>';
            svg += defs;

            sheetLanguages.forEach((langId, index) => {
                const iconData = iconsData[langId];
                if (!iconData) return;

                const lang = iconData.lang;
                if (!lang) return;

                const row = Math.floor(index / cols);
                const col = index % cols;
                const x = margin + (col * cellSize) + (cellSize / 2);
                const y = margin + (row * cellSize) + (cellSize / 2);

                const iconSize = stickerSize;
                const iconId = `icon-${langId.replace(/[^a-zA-Z0-9]/g, '-')}`;

                svg += `\n  <g transform="translate(${x}, ${y})">`;

                if (iconData.svgText) {
                    const fillColor = (layerType === 'branco' || layerType === 'verniz') ? 'fill="white"' : '';
                    svg += `\n    <svg x="${-iconSize / 2}" y="${-iconSize / 2}" width="${iconSize}" height="${iconSize}" preserveAspectRatio="xMidYMid meet">`;
                    svg += `\n      <use href="#${iconId}" width="100%" height="100%" ${fillColor}/>`;
                    svg += `\n    </svg>`;
                } else {
                    const fontSize = stickerSize / 8;
                    svg += `\n    <text x="0" y="${fontSize / 3}" text-anchor="middle" font-size="${fontSize}" font-weight="bold" fill="${(layerType === 'cores') ? (lang.color || '#666') : 'white'}">${lang.name}</text>`;
                }

                svg += `\n  </g>`;
            });

            svg += `\n</svg>`;
            return svg;
        }

        function downloadFile(filename, content, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        window.addEventListener('DOMContentLoaded', renderLanguages);
        window.addEventListener('DOMContentLoaded', updateStats);
    </script>
</body>

</html>
